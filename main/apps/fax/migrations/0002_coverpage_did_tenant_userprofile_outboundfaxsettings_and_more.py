# Generated by Django 4.2.16 on 2025-08-24 15:03

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('fax', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='CoverPage',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('template_type', models.CharField(choices=[('professional', 'Professional'), ('simple', 'Simple'), ('modern', 'Modern'), ('classic', 'Classic'), ('custom', 'Custom HTML')], default='professional', max_length=20)),
                ('header_text', models.CharField(default='FAX TRANSMISSION', max_length=255)),
                ('show_logo', models.BooleanField(default=True)),
                ('logo_position', models.CharField(choices=[('left', 'Left'), ('center', 'Center'), ('right', 'Right')], default='left', max_length=10)),
                ('show_date', models.BooleanField(default=True)),
                ('show_time', models.BooleanField(default=True)),
                ('show_from', models.BooleanField(default=True)),
                ('show_to', models.BooleanField(default=True)),
                ('show_pages', models.BooleanField(default=True)),
                ('show_subject', models.BooleanField(default=True)),
                ('show_message', models.BooleanField(default=True)),
                ('custom_field_1_label', models.CharField(blank=True, max_length=50)),
                ('custom_field_2_label', models.CharField(blank=True, max_length=50)),
                ('custom_field_3_label', models.CharField(blank=True, max_length=50)),
                ('footer_text', models.TextField(blank=True, default='This transmission is confidential and intended solely for the addressee.')),
                ('font_family', models.CharField(default='Arial, sans-serif', max_length=50)),
                ('primary_color', models.CharField(default='#000000', max_length=7)),
                ('secondary_color', models.CharField(default='#666666', max_length=7)),
                ('custom_html', models.TextField(blank=True, help_text='Custom HTML template (for advanced users)')),
                ('is_default', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Cover Page Template',
                'verbose_name_plural': 'Cover Page Templates',
                'db_table': 'fax_cover_page',
                'ordering': ['-is_default', 'name'],
            },
        ),
        migrations.CreateModel(
            name='DID',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('number', models.CharField(max_length=20, unique=True, validators=[django.core.validators.RegexValidator(message="Phone number format: '+999999999'", regex='^\\+?1?\\d{9,15}$')])),
                ('assigned_at', models.DateTimeField(blank=True, null=True)),
                ('provider', models.CharField(choices=[('telnyx', 'Telnyx'), ('twilio', 'Twilio'), ('vitelity', 'Vitelity'), ('internal', 'Internal')], default='telnyx', max_length=20)),
                ('provider_sid', models.CharField(blank=True, help_text='Provider-specific ID', max_length=100)),
                ('description', models.CharField(blank=True, max_length=255)),
                ('is_fax_enabled', models.BooleanField(default=True)),
                ('is_voice_enabled', models.BooleanField(default=False)),
                ('is_sms_enabled', models.BooleanField(default=False)),
                ('route_to_email', models.EmailField(blank=True, help_text='Forward faxes to this email', max_length=254)),
                ('route_to_extension', models.CharField(blank=True, help_text='Forward calls to extension', max_length=10)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_dids', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'DID Number',
                'verbose_name_plural': 'DID Numbers',
                'db_table': 'fax_did',
                'ordering': ['number'],
            },
        ),
        migrations.CreateModel(
            name='Tenant',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True)),
                ('company_name', models.CharField(max_length=255)),
                ('domain', models.CharField(help_text='e.g., company.efax.local', max_length=255, unique=True)),
                ('admin_email', models.EmailField(max_length=254)),
                ('admin_phone', models.CharField(max_length=20)),
                ('billing_email', models.EmailField(max_length=254)),
                ('address_line1', models.CharField(max_length=255)),
                ('address_line2', models.CharField(blank=True, max_length=255)),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(max_length=50)),
                ('postal_code', models.CharField(max_length=20)),
                ('country', models.CharField(default='US', max_length=2)),
                ('max_users', models.IntegerField(default=10)),
                ('max_dids', models.IntegerField(default=5)),
                ('max_pages_per_month', models.IntegerField(default=1000)),
                ('logo', models.ImageField(blank=True, null=True, upload_to='tenant_logos/')),
                ('primary_color', models.CharField(default='#007bff', help_text='Hex color code', max_length=7)),
                ('secondary_color', models.CharField(default='#6c757d', help_text='Hex color code', max_length=7)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Tenant',
                'verbose_name_plural': 'Tenants',
                'db_table': 'fax_tenant',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('phone', models.CharField(blank=True, max_length=20)),
                ('mobile', models.CharField(blank=True, max_length=20)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('title', models.CharField(blank=True, max_length=100)),
                ('can_send_fax', models.BooleanField(default=True)),
                ('can_receive_fax', models.BooleanField(default=True)),
                ('can_manage_contacts', models.BooleanField(default=True)),
                ('can_view_reports', models.BooleanField(default=False)),
                ('is_tenant_admin', models.BooleanField(default=False)),
                ('timezone', models.CharField(default='UTC', max_length=50)),
                ('date_format', models.CharField(default='%Y-%m-%d', max_length=20)),
                ('time_format', models.CharField(default='%H:%M:%S', max_length=20)),
                ('max_pages_per_day', models.IntegerField(default=100)),
                ('max_pages_per_month', models.IntegerField(default=1000)),
                ('pages_sent_today', models.IntegerField(default=0)),
                ('pages_sent_this_month', models.IntegerField(default=0)),
                ('signature_image', models.ImageField(blank=True, null=True, upload_to='signatures/')),
                ('signature_text', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('last_login_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='users', to='fax.tenant')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='fax_profile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'User Profile',
                'verbose_name_plural': 'User Profiles',
                'db_table': 'fax_user_profile',
                'ordering': ['user__username'],
            },
        ),
        migrations.CreateModel(
            name='OutboundFaxSettings',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('use_ecm', models.BooleanField(default=True, help_text='Use Error Correction Mode')),
                ('fine_resolution', models.BooleanField(default=False, help_text='Use fine resolution (204x196 dpi)')),
                ('max_retries', models.IntegerField(default=3, help_text='Maximum retry attempts')),
                ('retry_interval', models.IntegerField(default=300, help_text='Seconds between retries')),
                ('confirmation_enabled', models.BooleanField(default=True)),
                ('confirmation_email', models.EmailField(blank=True, max_length=254)),
                ('include_first_page', models.BooleanField(default=True, help_text='Include first page in confirmation')),
                ('header_format', models.CharField(default='{date} {time} | From: {sender} | To: {recipient} | Page {page}/{total}', help_text='Header format for transmitted pages', max_length=255)),
                ('allow_scheduling', models.BooleanField(default=True, help_text='Allow scheduled transmissions')),
                ('business_hours_only', models.BooleanField(default=False, help_text='Send only during business hours')),
                ('business_hours_start', models.TimeField(default='08:00')),
                ('business_hours_end', models.TimeField(default='18:00')),
                ('business_days', models.CharField(default='1,2,3,4,5', help_text='Comma-separated day numbers (1=Monday)', max_length=20)),
                ('max_pages_per_fax', models.IntegerField(default=100)),
                ('max_cost_per_fax', models.DecimalField(decimal_places=2, default=10.0, max_digits=10)),
                ('require_approval_above', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('default_cover_page', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='fax.coverpage')),
                ('default_did', models.ForeignKey(blank=True, help_text='Default outbound DID', null=True, on_delete=django.db.models.deletion.SET_NULL, to='fax.did')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='fax.tenant')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='outbound_fax_settings', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Outbound Fax Settings',
                'verbose_name_plural': 'Outbound Fax Settings',
                'db_table': 'fax_outbound_settings',
            },
        ),
        migrations.CreateModel(
            name='InboundFaxSettings',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('auto_print', models.BooleanField(default=False, help_text='Automatically print received faxes')),
                ('printer_name', models.CharField(blank=True, help_text='Network printer name', max_length=100)),
                ('email_enabled', models.BooleanField(default=True)),
                ('email_address', models.EmailField(help_text='Primary email for fax delivery', max_length=254)),
                ('cc_addresses', models.TextField(blank=True, help_text='CC email addresses (one per line)')),
                ('email_format', models.CharField(choices=[('pdf', 'PDF'), ('tiff', 'TIFF'), ('both', 'Both PDF and TIFF')], default='pdf', max_length=10)),
                ('email_subject_template', models.CharField(default='Fax received from {sender} - {pages} pages', help_text='Variables: {sender}, {recipient}, {pages}, {date}, {time}', max_length=255)),
                ('include_cover_sheet', models.BooleanField(default=False, help_text='Include summary cover sheet in email')),
                ('ocr_enabled', models.BooleanField(default=False, help_text='Perform OCR on received faxes')),
                ('ocr_language', models.CharField(default='eng', help_text='OCR language code', max_length=10)),
                ('searchable_pdf', models.BooleanField(default=True, help_text='Create searchable PDFs when OCR is enabled')),
                ('archive_enabled', models.BooleanField(default=True)),
                ('archive_days', models.IntegerField(default=90, help_text='Days to keep faxes in archive')),
                ('storage_backend', models.CharField(choices=[('local', 'Local Storage'), ('s3', 'Amazon S3'), ('azure', 'Azure Blob'), ('gcs', 'Google Cloud Storage')], default='local', max_length=20)),
                ('storage_path', models.CharField(blank=True, help_text='Custom storage path/bucket', max_length=255)),
                ('routing_enabled', models.BooleanField(default=False, help_text='Enable advanced routing rules')),
                ('routing_rules', models.JSONField(blank=True, default=dict, help_text='JSON routing rules based on sender, time, etc.')),
                ('sms_notification', models.BooleanField(default=False)),
                ('sms_number', models.CharField(blank=True, max_length=20)),
                ('webhook_enabled', models.BooleanField(default=False)),
                ('webhook_url', models.URLField(blank=True)),
                ('webhook_secret', models.CharField(blank=True, max_length=64)),
                ('require_encryption', models.BooleanField(default=False, help_text='Encrypt stored faxes')),
                ('allowed_senders', models.TextField(blank=True, help_text='Whitelist of allowed sender numbers (one per line)')),
                ('blocked_senders', models.TextField(blank=True, help_text='Blacklist of blocked sender numbers (one per line)')),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='fax.tenant')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='inbound_fax_settings', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Inbound Fax Settings',
                'verbose_name_plural': 'Inbound Fax Settings',
                'db_table': 'fax_inbound_settings',
            },
        ),
        migrations.AddField(
            model_name='did',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dids', to='fax.tenant'),
        ),
        migrations.AddField(
            model_name='coverpage',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cover_pages', to='fax.tenant'),
        ),
    ]
